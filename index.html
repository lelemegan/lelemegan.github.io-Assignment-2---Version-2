<!DOCTYPE html>
<html>
  <head>
    <title>Tiong Le Megan FIT3179 Assignment 2</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css" integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH" crossorigin="anonymous">

    <link rel="stylesheet" href="stylesheet.css"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="icon" href="tab-logo.png">

</head>
  <body>
    <div class="first-container"> <!--tried adding pure-g here-->
        <div class="head-block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MUCH IS 1GB OF DATA?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
        <div class="head-block">
            <button onclick="navigateToAnchor('average_price_container')" class="pure-button">
                <i class="fa fa-chevron-down" aria-hidden="true"></i>        Let's See
            </button>
        </div>
    </div>
    <div id="average_price_container" class="second-container">
        <div class="block">
            <h3>Average Price</h3>
        </div>
        <div class="block-button">
            <button onclick="renderGraph(2019)" class="pure-button">
                2019
            </button>
            <button onclick="renderGraph(2020)" class="pure-button">
                2020
            </button>
            <button onclick="renderGraph(2021)" class="pure-button">
                2021
            </button>
            <button onclick="renderGraph(2022)" class="pure-button">
                2022
            </button>
            <h4>
                &nbsp;&nbsp;&nbsp;&nbsp;[<-- Click to filter]
            </h4>
        </div>
        <div class="vis-block">
            <div id="vis"></div>
        </div>
        <div class="block">
            <div id="first-para" class="paragraph">
                The average price of 1GB of data has gradually decreased over the years. According to research, data price deflation
                has been a norm for years. The price of 1GB of data falls each year and is not easily affected by other factors. The 
                reason for this is that while price of data is decreasing, demand for data has never ceased. Data usage has increased
                simultaneously over the years. 
            </div>
        </div>
        <div class="vis-block">
            <div id="vis_b"></div>
        </div>
        <div class="block">
            <div class="paragraph">
                In <b>2019</b>, we can see that <span class="highlight-lowest">Mayotte</span> has the lowest average price (of 1GB of data) of 0.22USD in the world
                while <span class="highlight-highest">Nicaragua</span> has the highest average price (of 1GB of data) of 65.83USD in the world. Mayotte continued
                to be the lowest the subsequent year. Following that, Mayotte dropped out of the lowest five category as 
                the price of data increased to 1.2USD. 
                <br>
                <br>
                In 2020, <span class="highlight-lowest">Mayotte</span> was the country with lowest price (of 1GB of data) of 0.08USD only. The price of 1GB of data dropped 
                significantly by more than half compared to the previous year, 2019. On the other hand, <span class="highlight-highest">Saint Helena</span> has the average 
                most expensive price (of 1GB of data) of 52.5USD.
                <br>
                <br>
                In 2021, <span class="highlight-lowest">Israel</span> has the average lowest price (of 1GB of data) of 0.05USD. Whereas, <span class="highlight-highest">Saint Helena</span> 
                continued to be the country with average highest price (of 1GB of data) of 41.06USD. Saint Helena has a significant decrease of more than 10USD. 
                <br>
                <br>
                This year, up till July, <span class="highlight-lowest">Israel</span> remained in the category of average lowest price (of 1GB of data) with an even lower price 
                of 0.04USD while <span class="highlight-highest">Saint Helena</span> stayed as the country with average most expensive price (of 1GB of data) of 41.06USD, which is the same as the previous year, 2021. 
            </div>
            
        </div>
    </div>
    <div class="third-container parallax">
        <div class="third-block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MANY INTERNET USERS ARE THERE IN THE WORLD?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Number of Internet Users</h3>
        </div>
        <div id="vis2"></div>
    </div>
    <div class="third-container">
        <div class="block"> <!--tried adding pure-u-5-5 here-->
            <h1>WHAT PERCENTAGE OF THE POPULATION ARE INTERNET USERS?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Percentage of Internet Users</h3>
        </div>
        <div class="fifth-container">
            <div id="vis3"></div>
            <div class="paragraph">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fermentum nibh id erat gravida, in porta elit mollis. 
                Quisque in ligula mollis, rhoncus orci sit amet, hendrerit neque. Ut eu posuere augue. Nulla non lacus sem. Nullam 
                non mauris neque. In hac habitasse platea dictumst. In pharetra eu odio ut rhoncus. Vestibulum non laoreet odio. 
                Praesent venenatis egestas tristique. 
                <br>
                <br>
                Nam feugiat velit ut bibendum laoreet. Proin sed quam magna. Fusce porttitor orci suscipit semper gravida. Phasellus 
                ac erat sollicitudin, accumsan purus vitae, blandit ex. Nullam turpis turpis, tincidunt in lorem a, placerat feugiat 
                ante. Nulla facilisi. Praesent lorem quam, gravida in tellus sollicitudin, blandit pretium enim.
            </div>
        </div>
        
    </div>
    <div class="last-container">
        <div class="last-block">
            <div class="last-paragraph">
                Tiong Le Megan | FIT3179 | 33332053
                <br>
                <br>
                <b>Datasource</b>
                <br>
                Price Dataset credits to <a href="https://www.cable.co.uk/">Cable CO UK</a>
                <br>
                Population in Numbers Dataset credits to <a href="https://data.worldbank.org/">Data World Bank</a>
                <br>
                Population in Percentage Dataset credits to <a href="https://data.worldbank.org/indicator/IT.NET.USER.ZS">Data World Bank</a>
            </div>
        </div>
    </div>
    </body>
    <script type="text/javascript">
      function navigateToAnchor(id){
        location.href=`#${id}`;
      }

      function renderGraph(year){
        var world_map_data = {
          "autosize":{
              "type":"fit",
              "resize":true
          },
          "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
            "title":`Average Price of 1GB of Data in the World ${year}`,
            "width":550,
            "height":300,
            "projection":{
                "type":"equalEarth"
            },
            "layer":[
                {
                    "data":{
                        "graticule":{
                            "step":[
                                10,
                                10
                            ]
                        }
                    },
                    "mark":{
                        "type":"geoshape",
                        "stroke":"lightgrey"
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                        "format":{
                            "type":"topojson",
                            "feature":"ne_110m_admin_0_countries"
                        }
                    },
                    "transform":[
                        {
                            "calculate":"'Data is not available in ' + datum.properties.NAME",
                            "as":"note"
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "fill":"#B7B69D",
                        "stroke":"white",
                        "strokeWidth":1
                    },
                    "encoding":{
                        "tooltip":{
                            "field":"note"
                        }
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                    },
                    "transform":[
                    {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price"},
                        {
                            "lookup":"Name",
                            "from":{
                                "data":{
                                    "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                                    "format":{
                                        "type":"topojson",
                                        "feature":"ne_110m_admin_0_countries"
                                    }
                                },
                                "key":"properties.NAME"
                            },
                            "as":"geo"
                        },
                        {
                            "filter":`datum.Year == ${year}`
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "stroke":"#fff",
                        "strokeWidth":0.5
                    },
                    "encoding":{
                        "shape":{
                            "field":"geo",
                            "type":"geojson"
                        },
                        "color":{
                            "field":"Average_Price",
                            "type":"quantitative",
                            "scale":{
                                "type":"threshold",
                                "domain":[
                                    1,
                                    3,
                                    5,
                                    7,
                                    9,
                                    11,
                                    13,
                                    15
                                ],
                                "range":[
                                    "#D6DFFF", 
                                    "#B6C5F8", 
                                    "#91A5E9", 
                                    "#677FD6", 
                                    "#455BC4", 
                                    "#283AB5", 
                                    "#0B1BA5", 
                                    "#0B148B", 
                                    "#0B0C71"
                                ]
                            },
                            "legend":{
                                "format":".2s",
                                "title": "Average Price (in USD)"
                            }
                        },
                        "tooltip":[
                            {
                                "field":"Name",
                                "type":"nominal",
                                "title":"Country"
                            },
                            {
                                "field":"Continental region",
                                "type":"nominal",
                                "title":"Continent"
                            },
                            {
                                "field":"Average_Price",
                                "type":"quantitative",
                                "title":"Average Price in USD",
                                "format":","
                            },
                            {
                                "field":"Year",
                                "type":"quantitative",
                                "title":"Year"
                            }
                        ]
                    }
                }],
          "config":{}};
          
        var top_low_price_data = 
        {
  "hconcat": [
    {
      "title": "Average Lowest Price of 1GB of Data",
      "width": 150,
      "data": {
        "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
      },
      "transform": [
        {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price_Num"},
        {"filter": `datum.Year == ${year} & datum.Average_Price_Num>0`},
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Average_Price_Num", "order": "ascending"}]
        },
        {"filter": "datum.rank <=5"}
      ],
      "mark": {"type": "bar", "cornerRadiusEnd": 4},
      "encoding": {
        "x": {
          "field": "Name",
          "title": "Country",
          "type": "nominal",
          "sort": {"field": "Average_Price_Num", "order": "ascending"}
        },
        "y": {
          "field": "Average_Price_Num",
          "title": "Average Price (in USD)",
          "type": "quantitative"
        },
    "tooltip": [
      {"field": "Name", "type": "ordinal", "title": "Country"},
      {"field": "Average_Price_Num", "type": "quantitative", "title": "Average Price (in USD)"},
    {"field": "Year", "type": "quantitative", "title": "Year"}],
        "color": {"value": "#D6DFFF"}
      }
    },
    {
      "title": "Average Most Expensive Price of 1GB of Data",
      "width": 150,
      "data": {
        "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
      },
      "transform": [
        {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price_Num"},
        {"filter": `datum.Year == ${year} & datum.Average_Price_Num>0`},
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Average_Price_Num", "order": "descending"}]
        },
        {"filter": "datum.rank <=5"}
      ],
      "mark": {"type": "bar", "cornerRadiusEnd": 4},
      "encoding": {
        "x": {
          "field": "Name",
          "title": "Country",
          "type": "nominal",
          "sort": {"field": "Average_Price_Num", "order": "descending"}
        },
        "y": {
          "field": "Average_Price_Num",
          "title": "Average Price (in USD)",
          "type": "quantitative"
        },
    "tooltip": [
      {"field": "Name", "type": "ordinal", "title": "Country"},
      {"field": "Average_Price_Num", "type": "quantitative", "title": "Average Price (in USD)"},
    {"field": "Year", "type": "quantitative", "title": "Year"}],
        "color": {"value": "#0B0C71"}
      }
    }
  ]
};
        
      document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis', world_map_data);
        document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis_b', top_low_price_data);

        // document.getElementById("first-para").innerHTML = "`$Year`";
      }

      
      renderGraph(2022);

      var Number_Of_Internet_Users_Vis = {
                                            "data": {
                                                "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/number-of-internet-users-by-country.csv"
                                            },
                                            "vconcat": [
                                                {
                                                "transform": [
                                                    {
                                                    "filter": {
                                                        "field": "Country_Name",
                                                        "oneOf": [
                                                        "North America",
                                                        "Europe",
                                                        "Africa",
                                                        "South America",
                                                        "East Asia & Pacific",
                                                        "South Asia",
                                                        "Asia"
                                                        ]
                                                    }
                                                    }
                                                ],
                                                "width": 600,
                                                "height": 200,
                                                "mark": "area",
                                                "encoding": {
                                                    "x": {
                                                    "field": "Year",
                                                    "type": "temporal",
                                                    "scale": {"domain": {"param": "time_brush"}}
                                                    },
                                                    "y": {
                                                    "field": "No_Of_Internet_Users",
                                                    "type": "quantitative",
                                                    "title": "Number of Internet Users"
                                                    },
                                                    "color": {
                                                    "field": "Country_Name",
                                                    "type": "nominal",
                                                    "title": "Continental Region"
                                                    },
                                                        "tooltip":[
                                                    {
                                                        "field":"Country_Name",
                                                        "type":"nominal",
                                                        "title":"Continental Region"
                                                    },
                                                    {
                                                    "field": "No_Of_Internet_Users",
                                                    "type": "quantitative",
                                                    "title": "Number of Internet Users"
                                                    }
                                                ]
                                                }
                                                },
                                                {
                                                "transform": [{"filter": "datum.Country_Name=='World'"}],
                                                "width": 600,
                                                "height": 100,
                                                "mark": "line",
                                                "params": [
                                                    {
                                                    "name": "time_brush",
                                                    "select": {"type": "interval", "encodings": ["x"]}
                                                    }
                                                ],
                                                "encoding": {
                                                    "x": {"field": "Year", "type": "temporal"},
                                                    "y": {
                                                    "field": "No_Of_Internet_Users",
                                                    "type": "quantitative",
                                                    "title": "Number of Internet Users"
                                                    },
                                                    "color": {"field": "Country_Name", "type": "nominal"}
                                                }
                                                }
                                            ]
                                            };
      vegaEmbed('#vis2', Number_Of_Internet_Users_Vis);

      var yourV3Spec = {
  "data": {
    "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Internet%20Users%20Dataset.csv"
  },
  "vconcat": [
    {
      "transform": [
        {
          "calculate": "toNumber(datum.Users_Percentage)",
          "as": "User_Percentage"
        },
        {
          "filter": {
            "field": "Country_Name",
            "oneOf": [
              "North America",
              "Europe & Central Asia",
              "Middle East & North Africa",
              "Latin America & Caribbean",
              "East Asia & Pacific",
              "South Asia",
              "Sub-Saharan Africa"
            ]
          }
        }
      ],
      "width": 300,
      "height": 150,
      "mark": "line",
      "encoding": {
        "x": {
          "field": "Year",
          "type": "temporal",
          "scale": {"domain": {"param": "time_brush"}}
        }},
      "layer": [
        {
          "encoding": {
            "y": {
              "field": "Users_Percentage", 
              "type": "quantitative",
              "title": "% of Internet Users"
            },
            "color": {"field": "Country_Name", "type": "nominal", "title": "Continental Region", "mark": "line"}
          },
          "layer": [
            {"mark": "line"},
            {"transform": [{"filter": {"param": "hover", "empty": false}}], "mark": "point"}
          ]
        },
        {
          "transform": [{"pivot": "Country_Name", "value": "User_Percentage", "groupby": ["Year"]}],
          "mark": "rule",
          "encoding": {
            "opacity": {
              "condition": {"value": 0.3, "param": "hover", "empty": false},
              "value": 0
            },
            "tooltip": [
              {"field": "North America", "type": "quantitative", "format": ".2f"},
              {"field": "Europe & Central Asia", "type": "quantitative", "format": ".2f"},
              {"field": "Middle East & North Africa", "type": "quantitative", "format": ".2f"},
              {"field": "Latin America & Caribbean", "type": "quantitative", "format": ".2f"},
              {"field": "East Asia & Pacific", "type": "quantitative", "format": ".2f"},
              {"field": "South Asia", "type": "quantitative", "format": ".2f"},
              {"field": "Sub-Saharan Africa", "type": "quantitative", "format": ".2f"}
            ]
          },
          "params": [{
            "name": "hover",
            "select": {
              "type": "point",
              "fields": ["Year"],
              "nearest": true,
              "on": "mouseover",
              "clear": "mouseout"
            }
         }]
        
        }]
    },
    {
      "transform": [{"filter": "datum.Country_Name=='World'"}],
      "width": 300,
      "height": 50,
      "mark": "line",
      "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
      "encoding": {
        "x": {"field": "Year", "type": "temporal"},
        "y": {
          "field": "Users_Percentage", 
          "type": "quantitative",
          "title": "% of Internet Users"
        },
        "color": {"field": "Country_Name", "type": "nominal"}
      }
    }
  ]
};
vegaEmbed('#vis3', yourV3Spec);
    </script>
  </body>
</html>