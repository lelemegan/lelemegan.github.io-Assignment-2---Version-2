<!DOCTYPE html>
<html>
  <head>
    <title>Tiong Le Megan FIT3179 Assignment 2</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css" integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH" crossorigin="anonymous">

    <link rel="stylesheet" href="stylesheet.css"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
  <body>
    <div class="first-container"> <!--tried adding pure-g here-->
        <div class="block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MUCH IS 1GB OF DATA?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
        <div class="block">
            <button onclick="navigateToAnchor('average_price_container')" class="pure-button">
                <i class="fa fa-chevron-down" aria-hidden="true"></i>        Let's See
            </button>
        </div>
    </div>
    <div id="average_price_container" class="second-container">
        <div class="block">
            <h3>Average Price</h3>
        </div>
        <div class="block-button">
            <button onclick="renderGraph(2019)" class="pure-button">
                2019
            </button>
            <button onclick="renderGraph(2020)" class="pure-button">
                2020
            </button>
            <button onclick="renderGraph(2021)" class="pure-button">
                2021
            </button>
            <button onclick="renderGraph(2022)" class="pure-button">
                2022
            </button>
        </div>
        <div class="vis-block">
            <div id="vis"></div>
        </div>
        <div class="block">
            <div class="paragraph">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fermentum nibh id erat gravida, in porta elit mollis. 
                Quisque in ligula mollis, rhoncus orci sit amet, hendrerit neque. Ut eu posuere augue. Nulla non lacus sem. Nullam 
                non mauris neque. In hac habitasse platea dictumst. In pharetra eu odio ut rhoncus. Vestibulum non laoreet odio. 
                Praesent venenatis egestas tristique. Pellentesque leo tortor, feugiat vitae consectetur et, semper eu augue. 
                Pellentesque at vulputate mauris, non rhoncus enim. Quisque elementum leo lacus, ut imperdiet ipsum laoreet id. 
                Aliquam ut massa tincidunt, sollicitudin dui a, semper ligula. Phasellus et elit ornare, efficitur est sit amet, 
                bibendum enim. Etiam euismod ultrices nibh eu facilisis.
                <br>
                <br>
                Nam feugiat velit ut bibendum laoreet. Proin sed quam magna. Fusce porttitor orci suscipit semper gravida. Phasellus 
                ac erat sollicitudin, accumsan purus vitae, blandit ex. Nullam turpis turpis, tincidunt in lorem a, placerat feugiat 
                ante. Nulla facilisi. Praesent lorem quam, gravida in tellus sollicitudin, blandit pretium enim.
            </div>
        </div>
        <div class="vis-block">
            <div id="vis_b"></div>
        </div>
        <div class="block">
            <div class="paragraph">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fermentum nibh id erat gravida, in porta elit mollis. 
                Quisque in ligula mollis, rhoncus orci sit amet, hendrerit neque. Ut eu posuere augue. Nulla non lacus sem. Nullam 
                non mauris neque. In hac habitasse platea dictumst. In pharetra eu odio ut rhoncus. Vestibulum non laoreet odio. 
                Praesent venenatis egestas tristique. Pellentesque leo tortor, feugiat vitae consectetur et, semper eu augue. 
                Pellentesque at vulputate mauris, non rhoncus enim. Quisque elementum leo lacus, ut imperdiet ipsum laoreet id. 
                Aliquam ut massa tincidunt, sollicitudin dui a, semper ligula. Phasellus et elit ornare, efficitur est sit amet, 
                bibendum enim. Etiam euismod ultrices nibh eu facilisis.
                <br>
                <br>
                Nam feugiat velit ut bibendum laoreet. Proin sed quam magna. Fusce porttitor orci suscipit semper gravida. Phasellus 
                ac erat sollicitudin, accumsan purus vitae, blandit ex. Nullam turpis turpis, tincidunt in lorem a, placerat feugiat 
                ante. Nulla facilisi. Praesent lorem quam, gravida in tellus sollicitudin, blandit pretium enim.
            </div>
        </div>
    </div>
    <div class="third-container">
        <div class="block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MUCH IS 1GB OF DATA?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Number of Internet Users</h3>
        </div>
        <div id="vis2"></div>
    </div>
    <div class="third-container">
        <div class="block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MUCH IS 1GB OF DATA?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Percentage of Internet Users</h3>
        </div>
        <div id="vis3"></div>
    </div>
    <script type="text/javascript">
      function navigateToAnchor(id){
        location.href=`#${id}`;
      }

      function renderGraph(year){
        var world_map_data = {
          "autosize":{
              "type":"fit",
              "resize":true
          },
          "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
            "title":`Average Price in the World ${year}`,
            "width":550,
            "height":300,
            "projection":{
                "type":"equalEarth"
            },
            "layer":[
                {
                    "data":{
                        "graticule":{
                            "step":[
                                10,
                                10
                            ]
                        }
                    },
                    "mark":{
                        "type":"geoshape",
                        "stroke":"lightgrey"
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                        "format":{
                            "type":"topojson",
                            "feature":"ne_110m_admin_0_countries"
                        }
                    },
                    "transform":[
                        {
                            "calculate":"'Data is not available in ' + datum.properties.NAME",
                            "as":"note"
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "fill":"#ddd",
                        "stroke":"white",
                        "strokeWidth":1
                    },
                    "encoding":{
                        "tooltip":{
                            "field":"note"
                        }
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                    },
                    "transform":[
                        {
                            "lookup":"Name",
                            "from":{
                                "data":{
                                    "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                                    "format":{
                                        "type":"topojson",
                                        "feature":"ne_110m_admin_0_countries"
                                    }
                                },
                                "key":"properties.NAME"
                            },
                            "as":"geo"
                        },
                        {
                            "filter":`datum.Year == ${year}`
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "stroke":"#fff",
                        "strokeWidth":0.5
                    },
                    "encoding":{
                        "shape":{
                            "field":"geo",
                            "type":"geojson"
                        },
                        "color":{
                            "field":"Average_Price",
                            "type":"quantitative",
                            "scale":{
                                "type":"threshold",
                                "domain":[
                                    0.5,
                                    1,
                                    2,
                                    3,
                                    4,
                                    5,
                                    6,
                                    7,
                                    8,
                                    9,
                                    10
                                ],
                                "range":[
                                    "#c5cae9",
                                    "#9fa8da",
                                    "#7986cb",
                                    "#5c6bc0",
                                    "#3f51b5",
                                    "#3949ab"
                                ]
                            },
                            "legend":{
                                "format":".2s"
                            }
                        },
                        "tooltip":[
                            {
                                "field":"Continental region",
                                "type":"nominal",
                                "title":"Continent"
                            },
                            {
                                "field":"Average_Price",
                                "type":"quantitative",
                                "title":"Average Price in USD",
                                "format":","
                            },
                            {
                                "field":"Year",
                                "type":"quantitative",
                                "title":"Year"
                            }
                        ]
                    }
                }],
          "config":{}};
          
        var top_low_price_data = 
              {
                  "hconcat":[
                      {
                          "title":"Average Lowest Price of 1GB of Data",
                          "width":150,
                          "data":{
                              "url":"https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                          },
                          "transform":[
                              {
                                  "filter":`datum.Year == ${year} & datum.Average_Price>0`
                              },
                              {
                                  "window":[
                                      {
                                          "op":"rank",
                                          "as":"rank"
                                      }
                                  ],
                                  "sort":[
                                      {
                                          "field":"Average_Price",
                                          "order":"ascending"
                                      }
                                  ]
                              },
                              {
                                  "filter":"datum.rank <=5"
                              }
                          ],
                          "mark":{
                              "type":"bar",
                              "cornerRadiusEnd":4
                          },
                          "encoding":{
                              "x":{
                                  "field":"Name",
                                  "title":"Country",
                                  "type":"nominal",
                                  "sort":{
                                      "field":"Average_Price",
                                      "order":"descending"
                                  }
                              },
                              "y":{
                                  "field":"Average_Price",
                                  "title":"Average Price",
                                  "type":"quantitative"
                              },
                              "color":{
                                  "value":"#ff9900"
                              }
                          }
                      },
                      {
                          "title":"Average Most Expensive Price of 1GB of Data",
                          "width":150,
                          "data":{
                              "url":"https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                          },
                          "transform":[
                              {
                                  "filter":`datum.Year == ${year} & datum.Average_Price>0`
                              },
                              {
                                  "window":[
                                      {
                                          "op":"rank",
                                          "as":"rank"
                                      }
                                  ],
                                  "sort":[
                                      {
                                          "field":"Average_Price",
                                          "order":"descending"
                                      }
                                  ]
                              },
                              {
                                  "filter":"datum.rank <=5"
                              }
                          ],
                          "mark":{
                              "type":"bar",
                              "cornerRadiusEnd":4
                          },
                          "encoding":{
                              "x":{
                                  "field":"Name",
                                  "title":"Country",
                                  "type":"nominal",
                                  "sort":{
                                      "field":"Average_Price",
                                      "order":"descending"
                                  }
                              },
                              "y":{
                                  "field":"Average_Price",
                                  "title":"Average Price",
                                  "type":"quantitative"
                              },
                              "color":{
                                  "value":"#ff9900"
                              }
                          }
                      }
                  ]
              
      };
        
      document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis', world_map_data);
        document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis_b', top_low_price_data);
      }

      renderGraph(2022);

      var yourV2Spec = {
  "data": {"url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/number-of-internet-users-by-country.csv"},
  "vconcat":[
{ "transform": [{"filter": {
                  "field": "Country_Name",
                  "oneOf": ["North America", "China", "India", "Latin America & Caribbean", "East Asia & Pacific", "South Asia", "Sub-Saharan Africa"]}
}],
  "width": 600,
  "height": 200,
  "mark": "area",
  "encoding": {
    "x": {"field": "Year", "type": "temporal",
          "scale": {"domain": {"param": "time_brush"}}},
    "y": {"field": "No_Of_Internet_Users", "type": "quantitative", "title": "Number of Internet Users"},
    "color": {"field": "Country_Name", "type": "nominal","title": "Continental Region"}
  }},
  {
  "transform": [{"filter": "datum.Country_Name=='World'"}],
  "width": 600,
  "height": 100,
  "mark": "line",
  "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
  "encoding": {
    "x": {"field": "Year", "type": "temporal"},
    "y": {"field": "No_Of_Internet_Users", "type": "quantitative", "title": "Number of Internet Users"},
    "color": {"field": "Country_Name", "type": "nominal"}
  }}
  ]
};
      vegaEmbed('#vis2', yourV2Spec);

      var yourV3Spec = {
  "data": {"url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Internet%20Users%20Dataset.csv"},
  "vconcat":[
{ "transform": [{"filter": {
                  "field": "Country_Name",
                  "oneOf": ["North America", "Europe & Central Asia", "Middle East & North Africa", "Latin America & Caribbean", "East Asia & Pacific", "South Asia", "Sub-Saharan Africa"]}
}],
  "width": 600,
  "height": 200,
  "mark": "line",
  "encoding": {
    "x": {"field": "Year", "type": "temporal",
          "scale": {"domain": {"param": "time_brush"}}},
    "y": {"field": "Users_Percentage", "type": "quantitative"},
    "color": {"field": "Country_Name", "type": "nominal"}
  }},
  {
  "transform": [{"filter": "datum.Country_Name=='World'"}],
  "width": 600,
  "height": 100,
  "mark": "line",
  "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
  "encoding": {
    "x": {"field": "Year", "type": "temporal"},
    "y": {"field": "Users_Percentage", "type": "quantitative"},
    "color": {"field": "Country_Name", "type": "nominal"}
  }}
  ]
};
vegaEmbed('#vis3', yourV3Spec);
    </script>
  </body>
</html>